var gform=function(e,t){"use strict";var i=_.merge({},e);this.methods=i.methods||{},this.eventBus=new gform.eventBus({owner:"form",item:"field",handlers:i.events||{}},this),this.on=this.eventBus.on,this.trigger=function(e,t,i){"string"==typeof e&&(e=[e]);var n=_.extend([],e);"object"==typeof t&&_.each(e,function(e){"-1"==e.indexOf(":")&&(n.unshift(e+":"+t.name),n.unshift(e+":"+t.path),n.unshift(e+":"+t.relative))}),this.dispatch(_.uniq(n),t,i)}.bind(this),this.dispatch=this.eventBus.dispatch,this.on("reset",function(e){e.form.set(e.form.options.data)}),this.on("clear",function(e){e.form.set()}),"object"==typeof i.collections?this.collections=i.collections:this.collections=gform.collections,this.options=_.assignIn({fields:[],legend:"",strict:!0,default:gform.default,data:"search",columns:gform.columns,name:gform.getUID()},this.opts,i),"function"==typeof this.options.onSet&&(i=this.options.onSet(i)),this.options.fields=this.options.fields.concat(this.options.actions),"string"==typeof this.options.data&&void 0!==window.location[this.options.data]&&(this.options.data=window.location[this.options.data].substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){return e[t[0]]=decodeURIComponent(t[1]),e},{})),this.options.sections&&_.each(_.filter(this.options.fields,{type:"fieldset"}),function(e,t){return e.index=t,e.section=!0,e.id=gform.getUID(),e}),this.el=t||i.el,"string"==typeof this.el?(this.selector=this.el+"",this.el=document.querySelector(this.el)):"object"==typeof this.el?this.el:t="",this.trigger("initialize",this);var n=function(){void 0===this.el&&(this.options.renderer="modal",this.el=gform.create(gform.render(this.options.template||"modal_container",this.options)),this.on("close",function(e){void 0===e.field&&e.form.modal("hide")}),this.el.querySelector(".close").addEventListener("click",function(e){this.trigger("cancel",this)}.bind(this)),document.addEventListener("keyup",function(e){"Escape"===e.key&&this.trigger("cancel",this)}.bind(this))),this.options.clear&&"modal"!=this.options.renderer&&(this.el.innerHTML=gform.render(this.options.sections+"_container",this.options)),this.container=this.el.querySelector("form")||this.el,this.rows=[],this.fields=[],this.fields=_.map(this.options.fields,gform.createField.bind(this,this,this.options.data||{},null,null)),_.each(this.fields,gform.inflate.bind(this,this.options.data||{})),this.reflow(),gform.each.call(this,gform.addConditions),gform.each.call(this,function(e){e.owner.trigger("change",e)}),this.options.private||(gform.instances[this.options.name]=this)};this.restore=n.bind(this),this.toJSON=gform.toJSON.bind(this),"function"==typeof this.options.onGet?this.get=function(){return this.options.onGet(this.toJSON(null,arguments))}.bind(this):this.get=this.toJSON,this.toString=gform.toString.bind(this),this.reflow=gform.reflow.bind(this),this.find=gform.find.bind(this),this.filter=gform.filter.bind(this),this.set=function(e,t){"function"==typeof this.options.onSet&&(t=this.options.onSet(t)),"string"==typeof e&&this.find(e).set(t),"object"==typeof e&&_.each(e,function(e,t){var i=this.find(t);if(void 0!==i&&i.fillable)if(i.array&&_.isArray(e)){var n=this.filter({array:{ref:i.array.ref}},1);n.length>1&&_.each(n.slice(1),function(e){var t=_.findIndex(e.parent.fields,{id:e.id});e.parent.fields.splice(t,1)}),_.isArray(e)&&i.set(e[0]);var s={};s[i.name]=e,gform.inflate.call(this.owner,s,i,_.findIndex(i.parent.fields,{id:i.id}),i.parent.fields);var r=this.filter({array:{ref:i.array.ref}},1).length,o=function(e,t,i){gform.toggleClass(i.querySelector(e),"hidden",t)};_.each(i.operator.container.querySelectorAll(".gform_isArray"),o.bind(null,'[data-ref="'+i.array.ref+'"] .gform-add',r>=(i.array.max||5))),_.each(i.operator.container.querySelectorAll(".gform_isArray"),o.bind(null,'[data-ref="'+i.array.ref+'"] .gform-minus',!(r>(i.array.min||1)))),i.operator.reflow()}else void 0!==i&&i.set(e)}.bind(this)),null==e&&gform.each.call(this,function(e){e.set("")})}.bind(this),this.isActive=!1,this.destroy=function(){this.isActive=!1,this.trigger(["close","destroy"]),this.el.removeEventListener("click",this.listener),this.el.innerHTML="",delete gform.instances[this.options.name],this.trigger("destroyed"),delete this.eventBus},n.call(this);var s=this.el.querySelector("ul.tabs");return null!==s&&s.addEventListener("click",function(e){"LI"==e.target.nodeName&&(e.preventDefault(),gform.removeClass(this.el.querySelector("ul.tabs .active"),"active"),gform.removeClass(this.el.querySelector(".tab-pane.active"),"active"),gform.addClass(e.target,"active"),gform.addClass(this.el.querySelector(e.target.parentElement.attributes.href.value),"active"))}.bind(this)),void 0===this.options.autoFocus&&(this.options.autoFocus=gform.options.autoFocus),this.options.autoFocus&&this.fields.length&&gform.types[this.fields[0].type].focus.call(this.fields[0]),this.listener=function(e){if(e.target.dataset.id&&(t=gform.findByID.call(this,e.target.dataset.id)),e.target.classList.contains("gform-add")&&(e.stopPropagation(),e.preventDefault(),gform.addField.call(this,t)),e.target.classList.contains("gform-minus")&&(e.stopPropagation(),e.preventDefault(),gform.removeField.call(this,t)),e.target.classList.contains("gform-append")){e.stopPropagation(),e.preventDefault();var t=gform.addField.call(this,_.last(this.filter({array:{ref:e.target.dataset.ref}},10)));this.trigger("appended",t)}}.bind(this),this.el.addEventListener("click",this.listener),this.trigger("initialized",this),this.isActive=!0,this.reflow(),this};gform.addField=function(e){var t,i=_.filter(e.parent.fields,function(t){return t.name==e.name&&void 0!==t.array&&!!t.array}).length;if(e.editable&&i<(e.array.max||5)){var n=_.findIndex(e.parent.fields,{id:e.id}),s={};s[e.name]=[e.item.value||null],t=gform.createField.call(this,e.parent,s,e.el,null,e.item,null,null,i),e.parent.fields.splice(n+1,0,t),gform.addConditions.call(this,t),gform.each.call(t,gform.addConditions),e.operator.reflow(),_.each(_.filter(e.parent.fields,function(t){return t.name==e.name&&void 0!==t.array&&!!t.array}),function(e,t){e.index=t,gform.types[e.type].setLabel.call(e)}),gform.each.call(e.owner,function(e){e.owner.trigger("change",e)}),gform.types[t.type].focus.call(t),e.parent.trigger(["change","input","create","inserted"],e),i++}var r=function(e,t,i){gform.toggleClass(i.querySelector(e),"hidden",t)};return _.each(e.operator.container.querySelectorAll(".gform_isArray"),r.bind(null,'[data-ref="'+e.array.ref+'"] .gform-add',i>=(e.array.max||5))),_.each(e.operator.container.querySelectorAll(".gform_isArray"),r.bind(null,'[data-ref="'+e.array.ref+'"] .gform-minus',!(i>(e.array.min||1)))),t},gform.removeField=function(e){var t=_.filter(e.parent.fields,function(t){return t.name==e.name&&void 0!==t.array&&!!t.array}).length;if(e.editable&&t>(e.array.min||1)){void 0!==e.eventlist&&_.each(e.owner.eventBus.handlers,function(t,i,n){_.each(t,function(t,i,n,s){_.each(e.eventlist,function(e,i,n){t==n&&delete i[e]}.bind(null,i,n))}),n[i]=_.compact(n[i])});var i=_.findIndex(e.parent.fields,{id:e.id});e.parent.fields.splice(i,1),e.operator.reflow(),_.each(_.filter(e.parent.fields,function(t){return t.name==e.name&&void 0!==t.array&&!!t.array}),function(e,t){e.index=t,gform.types[e.type].setLabel.call(e)}),e.parent.trigger(["change","input","removed"],e),t--}else e.editable&&e.set(null);var n=function(e,t,i){gform.toggleClass(i.querySelector(e),"hidden",t)};_.each(e.operator.container.querySelectorAll(".gform_isArray"),n.bind(null,'[data-ref="'+e.array.ref+'"] .gform-add',t>=(e.array.max||5))),_.each(e.operator.container.querySelectorAll(".gform_isArray"),n.bind(null,'[data-ref="'+e.array.ref+'"] .gform-minus',!(t>(e.array.min||1))))},gform.addConditions=function(e){gform.processConditions.call(e,e.show,function(e){var t=this.visible!==e;this.el.style.display=e?"block":"none",this.visible=e,t&&(this.operator.reflow(),this.parent.trigger("change",this))}),gform.processConditions.call(e,e.edit,function(e){this.editable=e,gform.types[this.type].edit.call(this,this.editable)}),void 0===e.parse&&(e.parse=e.show),gform.processConditions.call(e,e.parse,function(e){this.parsable=e}),void 0===e.report&&(e.report=e.show),gform.processConditions.call(e,e.report,function(e){this.reportable=e}),e.required&&gform.processConditions.call(e,e.required,function(e,t){this.required!==e&&this.update({required:e},t.field==this)})},gform.each=function(e){_.each(this.fields,function(t){e(t),void 0!==t.fields&&gform.each.call(t,e)})},gform.find=function(e,t){var i,n;if("string"==typeof e)i=e.split("."),n=_.find(this.fields,{name:i.shift()});else if("number"==typeof e);else if("object"==typeof e)return gform.filter.call(this,e,t)[0]||!1;return void 0!==n?void 0!==n.find?n.name==e||"number"==typeof e?n:n.find(i.join(".")):n:void 0!==this.parent&&"function"==typeof this.parent.find?this.parent.find(e):void 0},gform.findByID=function(e){return gform.filter.call(this,{id:e},10)[0]||!1},gform.filter=function(e,t){var i=[];return"string"==typeof e&&(e={name:e}),t=t||1,t--,_.each(this.fields,function(t,n){_.isMatch(n,e)&&i.push(n),t&&void 0!==n.fields&&(i=i.concat(gform.filter.call(n,e,t)))}.bind(null,t)),i},gform.toJSON=function(e){if("string"==typeof e&&e.length>0){e=e.split(".");var t=_.find(this.fields,{name:e.shift()});return void 0!==t?t.get(e.join(".")):void 0}var i={};return _.each(this.fields,function(e){e.parsable&&(e.array?(i[e.name]=i[e.name]||[],Array.isArray(i[e.name])||(i[e.name]=[]),i[e.name].push(e.get())):i[e.name]=e.get())}.bind(this)),i},gform.toString=function(e,t){if(t)return"string"==typeof e&&e.length>0?(e=e.split("."),_.find(this.fields,{name:e.shift()}).toString(e.join("."),t)):(i={},_.each(this.fields,function(t){t.visible&&(t.array?(i[t.name]=i[t.name]||[],i[t.name].push(t.toString(e,!0))):i[t.name]=t.toString(e,!0))}),i);if("string"==typeof e&&e.length>0)return e=e.split("."),_.find(this.fields,{name:e.shift()}).toString(e.join("."));var i="";return _.each(this.fields,function(e){e.reportable&&(i+=e.toString())}),i},gform.m=function(e,t,i,n){var s,r=gform.m,o="";function l(e,t){return e=null!=(e=e[(t=t.pop?t:t.split(".")).shift()])?e:"",0 in t?l(e,t):e}t=Array.isArray(t)?t:t?[t]:[],t=n?0 in t?[]:[1]:t;for(s=0;s<t.length;s++){var a,h="",d=0,f="object"==typeof t[s]?t[s]:{};(f=Object.assign({},i,f))[""]={"":t[s]},e.replace(/([\s\S]*?)({{((\/)|(\^)|#)(.*?)}}|$)/g,function(e,t,i,n,s,u,c){d?h+=d&&!s||1<d?e:t:(o+=t.replace(/{{{(.*?)}}}|{{(!?)(&?)(>?)(.*?)}}/g,function(e,t,i,n,s,o){return t?l(f,t):n?l(f,o):s?r(l(f,o),f):i?"":new Option(l(f,o)).innerHTML}),a=u),s?--d||(c=l(f,c),/^f/.test(typeof c)?o+=c.call(f,h,function(e){return r(e,f)}):o+=r(h,c,f,a),h=""):++d})}return o},gform.instances={},gform.inflate=function(e,t,i,n){var s=n;t.array&&(s=_.filter(s,function(e){return!e.index}));var r=_.findLast(s,{name:s[i].name});if(!r.array&&r.fields&&(this.options.strict?_.each(r.fields,gform.inflate.bind(this,e[r.name]||{})):_.each(r.fields,gform.inflate.bind(this,e[r.name]||r.owner.options.data[r.name]||{}))),r.array){var o=r.array.min||0;this.options.strict||"object"==typeof e[r.name]||"object"!=typeof r.owner.options.data[r.name]||(e=r.owner.options.data),"object"==typeof e[r.name]&&e[r.name].length>1&&e[r.name].length>o&&(o=e[r.name].length);for(var l=_.filter(r.parent.fields,function(e){return e.name==r.name&&void 0!==e.array&&!!e.array}).length;l<o;l++){var a=gform.createField.call(this,r.parent,e,r.el,l,r.item,null,null,l);r.parent.fields.splice(_.findIndex(r.parent.fields,{id:r.id})+1,0,a),r=a}o=r.operator.filter({array:{ref:r.array.ref}},1).length;var h=function(e,t,i){gform.toggleClass(i.querySelector(e),"hidden",t)};_.each(r.operator.container.querySelectorAll(".gform_isArray"),h.bind(null,'[data-ref="'+r.array.ref+'"] .gform-add',o>=(r.array.max||5))),_.each(r.operator.container.querySelectorAll(".gform_isArray"),h.bind(null,'[data-ref="'+r.array.ref+'"] .gform-minus',!(o>(r.array.min||1))))}},gform.normalizeField=function(e,t){t=t||this,e.type=e.type||this.options.default.type||"text",void 0===gform.types[e.type]&&(console.warn('Field type "'+e.type+'" not supported - using text instead'),e.type="text");var i=_.assignIn({id:gform.getUID(),label:e.legend||e.title||(gform.types[e.type]||gform.types.text).defaults.label||e.name,validate:[],valid:!0,parsable:!0,reportable:!0,visible:!0,editable:!0,parent:t,fillable:!0,array:!1,columns:this.options.columns||gform.columns,offset:this.options.offset||gform.offset||0,ischild:!(t instanceof gform)},this.opts,gform.default,this.options.default,(gform.types[e.type]||gform.types.text).defaults,e);return("function"==typeof i.value||"string"==typeof i.value&&0===i.value.indexOf("="))&&delete i.value,i.array&&("object"!=typeof i.array&&(i.array={}),i.array.ref=i.array.ref||gform.getUID()),void 0===i.multiple&&void 0!==i.limit&&i.limit>1&&(i.multiple=!0),i.name=i.name||(gform.renderString(e.label||e.title)||"").toLowerCase().split(" ").join("_"),""==i.name&&(i.name=i.id),i.item=_.extend(e,{}),i},gform.ajax=function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&(200===t.status?e.success(JSON.parse(t.responseText)):(console.log(t.responseText),"function"==typeof e.error&&e.error(t.responseText)))},t.open(e.verb||"GET",e.path),t.send()},gform.default={},gform.options={autoFocus:!0},gform.prototype.opts={actions:[{type:"cancel"},{type:"save"}],clear:!0,sections:"",suffix:":",rowClass:"row",requiredText:'<span style="color:red">*</span>'},gform.eventBus=function(e,t){this.options=e||{owner:"form",item:"field"},this.owner=t||this,this.on=function(e,t,i){if(void 0!==e){var n=e.split(" ");_.each(n,function(e,i){this.handlers[i]=this.handlers[i]||[],this.handlers[i].push(t),"object"==typeof e&&e.push(t)}.bind(this,i))}return this.owner}.bind(this),_.isArray(e.handlers)?(this.handlers={},_.each(e.handlers,function(e){this.on(e.event,e.handler)}.bind(this))):this.handlers=_.extend({},e.handlers),_.each(this.handlers,function(e,t,i){"function"==typeof e?i[t]=[e]:"string"==typeof e&&("function"==typeof this[e]?i[t]=[this[e]]:"function"==typeof this.owner[e]?i[t]=[this.owner[e]]:void 0!==this.owner.methods&&"function"==typeof this.owner.methods[e]?i[t]=[this.owner.methods[e]]:"function"==typeof window[e]?i[t]=[window[e]]:i[t]=null)}.bind(this)),this.dispatch=function(e,i,n){(n=n||{})[this.options.owner]=this.owner,void 0!==i&&(n[this.options.item]=i),n.default=!0,n.continue=!0,n.preventDefault=function(){this.default=!1}.bind(n),n.stopPropagation=function(){this.continue=!1}.bind(n);var s=[];return"string"==typeof e?s.push(e):s=s.concat(e),_.each(s,function(e,i){e.event=i;var s=function(i){n.continue&&"function"==typeof i&&i.call(t,e)}.bind(this);_.each(this.handlers[i],s),_.each(this.handlers["*"],s)}.bind(this,n)),n}.bind(this)},gform.mapOptions=function(e,t,i,n,s){s=s||[],e.owner instanceof gform&&(this.field=e),this.collections=n,this.eventBus=new gform.eventBus({owner:"field",item:"option"},this),this.optgroup=_.extend({},e),i=i||0;var r=this.optgroup.format;function o(e){return _.map(e,function(e){if("object"==typeof e&&"optgroup"==e.type)return e.map=new gform.mapOptions(_.extend({format:r},e),t,i,this.collections,s),e.map.on("*",function(e){this.eventBus.dispatch(e.event)}.bind(this)),e.id=gform.getUID(),gform.processConditions.call(this.field,e.edit,function(e,t,i){_.find(this.optgroup.options,{id:e}).editable=t,this.eventBus.dispatch("change")}.bind(this,e.id)),gform.processConditions.call(this.field,e.show,function(e,t,i){_.find(this.optgroup.options,{id:e}).visible=t,this.eventBus.dispatch("change")}.bind(this,e.id)),i+=e.map.getoptions().length,e;var n=_.extend({},e);return n.data=e,"string"!=typeof e&&"number"!=typeof e&&"boolean"!=typeof e||(n.label=n.value=e),n.index=e.index||""+i,void 0!==r&&(void 0!==r.label&&("string"==typeof r.label?n.label=gform.renderString(r.label,n):"function"==typeof r.label&&(n.label=r.label.call(this.option))),void 0!==r.display&&("string"==typeof r.display?n.display=gform.renderString(r.display,n):"function"==typeof r.display&&(n.display=r.display.call(this.option))),void 0!==r.value&&("string"==typeof r.value?n.value=gform.renderString(r.value,n):"function"==typeof r.value&&(n.value=r.value.call(this,n))),void 0!==r.cleanlabel&&("string"==typeof r.cleanlabel?n.label=gform.renderString(r.cleanlabel,n):"function"==typeof r.cleanlabel&&(n.label=r.cleanlabel.call(this.option)))),(n.value==t||null!=t&&t.length&&t.indexOf(n.value)>=0)&&(n.selected=!0),i+=1,n.i=i,n}.bind(this))}switch(this.optgroup.options=this.optgroup.options||[],typeof this.optgroup.options){case"string":this.optgroup.path=this.optgroup.path||this.optgroup.options,this.optgroup.options=[];break;case"function":this.optgroup.action=this.optgroup.options,this.optgroup.options=[]}if(void 0!==this.optgroup.max&&""!==this.optgroup.max)for(var l=this.optgroup.min||0;l<=this.optgroup.max;l+=this.optgroup.step||1)this.optgroup.options.push(""+l);void 0!==this.optgroup.action&&(this.optgroup.options=this.optgroup.options.concat(o.call(this,this.optgroup.action.call(this)))),_.isArray(this.optgroup.options)&&(this.optgroup.options=o.call(this,this.optgroup.options)),"string"==typeof this.optgroup.path&&this.optgroup.path.length&&(this.collections.on(this.optgroup.path,function(e){this.optgroup.options=o.call(this.optgroup.map,e.collection),this.eventBus.dispatch("change")}.bind(this)),void 0===this.collections.get(this.optgroup.path)?(this.collections.add(this.optgroup.path,[]),s.indexOf(this.optgroup.path)&&s.push(this.optgroup.path),gform.ajax({path:this.optgroup.path,success:function(e){this.collections.update(this.optgroup.path,e),s.indexOf(this.optgroup.path)>=0&&delete s[s.indexOf(this.optgroup.path)],this.eventBus.dispatch("collection"),this.eventBus.dispatch("change")}.bind(this)})):this.optgroup.options=o.call(this.optgroup.map,this.collections.get(this.optgroup.path)));var a={getobject:function(){return _.map(this.optgroup.options,function(e){return void 0!==e.map?(e.options=e.map.getoptions(),void 0===e.visible&&(e.visible=!0),void 0===e.editable&&(e.editable=!0),{optgroup:{label:e.label||"",visible:e.visible,editable:e.editable,options:e.map.getoptions()}}):e})}.bind(this),getoptions:function(e){var t=[];return _.each(this.optgroup.options,function(e){void 0!==e.map?t=t.concat(e.map.getoptions()):t.push(e)}),void 0!==e?_.find(t,e):t}.bind(this),on:this.eventBus.on,handlers:this.handlers,optgroup:this.optgroup};return Object.defineProperty(a,"waiting",{get:function(){return _.compact(s).length>0}}),a},gform.collectionManager=function(e){var t=e||{};return this.eventBus=new gform.eventBus({owner:"manager",item:"collection",handlers:{}},this),{add:function(e,i){t[e]=i},get:function(e){return t[e]},update:function(e,i){void 0!==i&&(t[e]=i),this.eventBus.dispatch(e,t[e])}.bind(this),on:this.eventBus.on}},gform.collections=new gform.collectionManager,gform.render=function(e,t){return gform.m(gform.stencils[e||"text"]||gform.stencils.text,_.extend({},gform.stencils,t,_.pick(t,"path","name","label","value","display","id","count","valid","visible","parseable","editable","errors","index","sibling")))},gform.create=function(e){return document.createRange().createContextualFragment(e).firstChild},gform.renderString=function(e,t){return gform.m(e||"",_.extend({},t,_.pick(t||{},"path","name","label","value","display","id","count","valid","visible","parseable","editable","errors","index","sibling")))},gform.addClass=function(e,t){void 0!==t&&t.length&&void 0!==e&&e&&(e.className=_.chain(e.className).split(/[\s]+/).union(t.split(" ")).join(" ").value())},gform.hasClass=function(e,t){if(void 0!==t&&t.length&&void 0!==e&&e)return-1!==e.className.indexOf(t)},gform.removeClass=function(e,t){void 0!==t&&t.length&&void 0!==e&&e&&(e.className=_.chain(e.className).split(/[\s]+/).difference(t.split(" ")).join(" ").value())},gform.toggleClass=function(e,t,i){i?gform.addClass(e,t):gform.removeClass(e,t)},gform.VERSION="0.0.1.1",gform.i=0,gform.getUID=function(){return"f"+gform.i++},gform.about=function(){return _.extend({version:gform.VERSION},gform.THEME,{types:_.keys(gform.types)})},gform.rows={add:function(e){var t=gform.getUID();return cRow={},cRow.used=0,cRow.ref=document.createElement("div"),cRow.ref.setAttribute("id",t),cRow.ref.setAttribute("class",this.options.rowClass),cRow.ref.setAttribute("style","margin-bottom:0;"),e.rows[t]=cRow,e.container.appendChild(cRow.ref),cRow},remove:function(){}},gform.layout=function(e){if(0!=e.columns&&e.visible){var t={};if(void 0!==e.parent&&e.parent.container){var i=e.parent.container;if(e.operator=e.parent,"function"==typeof e.target&&(e.target=e.target.call(e)),"string"==typeof e.target){var n=e.owner.el.querySelector(e.target);null!=n?(t={target:e.target},i=n,e.operator=e.owner):t.id=e.target}e.sibling&&(t.id=e.parent.filter({array:{ref:e.array.ref}},1)[0].row);var s=_.findLast(e.operator.rows,t);if(!e.sibling||void 0===t.id||void 0===s){if(void 0===s||s.used+parseInt(e.columns,10)+parseInt(e.offset,10)>e.owner.options.columns||1==e.forceRow){(s=t).id=gform.getUID(),s.used=0;var r="<div></div>";"function"==typeof gform.types[e.type].row&&(r=gform.types[e.type].row.call(e)||r),s.ref=gform.create(r),s.ref.setAttribute("id",s.id),s.ref.setAttribute("class",e.owner.options.rowClass),s.ref.setAttribute("style","margin-bottom:0;"),"string"==typeof gform.types[e.type].rowSelector?s.appender=s.ref.querySelector(gform.types[e.type].rowSelector):s.appender=s.ref,e.operator.rows=e.operator.rows||[],e.operator.rows.push(s),s.container=i,i.appendChild(s.ref)}s.used+=parseInt(e.columns,10),s.used+=parseInt(e.offset,10)}s.appender.appendChild(e.el),e.row=s.id}}},gform.createField=function(e,t,i,n,s,r,o,l){var a=gform.normalizeField.call(this,s,e);switch(a.owner=this,a.columns>this.options.columns&&(a.columns=this.options.columns),a.fillable&&(this.options.strict?a.array&&"object"==typeof(t[a.name]||a.owner.options.data[a.name])?a.value=t[a.name]||{}:a.value=_.defaults({value:t[a.name]},a).value:a.array&&"object"==typeof(t[a.name]||a.owner.options.data[a.name])?a.value=(t[a.name]||a.owner.options.data[a.name])[n||0]||{}:a.value=_.defaults({value:t[a.name]},{value:a.owner.options.data[a.name]},a).value),a.array&&"object"==typeof t[a.name]?a.fillable&&(a.value=t[a.name][n||0]):"function"==typeof a.item.value||"string"==typeof a.item.method&&"function"==typeof a.owner.methods[a.item.method]?(a.valueFunc=a.owner.methods[a.item.method]||a.item.value,a.derivedValue=function(e){return e.initial.valueFunc.call(null,e)},a.value=a.valueFunc.call(null,{form:this.owner,field:a,initial:a}),a.owner.on("initialized",function(e,t){t.field=t.initial=e,e.set.call(null,e.derivedValue.call(null,t))}.bind(null,a)),a.owner.on("input",function(e,t){t.initial=e,e.set.call(null,e.derivedValue.call(null,t))}.bind(null,a))):"string"==typeof a.item.value&&0===a.item.value.indexOf("=")?(a.derivedValue=function(){var e=this.owner.get();a.formula=gform.renderString(this.item.value.substr(1),e);try{if(a.formula.length&&"undefined"!=typeof math){var t=math.eval(a.formula,e);"object"==typeof t&&"undefined"!==t.entries&&"object"==typeof(t=_.last(t.entries))._data&&(t=t._data),_.isFinite(t)?a.formula=t.toFixed(this.item.precision||0):_.isArray(t)?a.formula=t:a.formula=""}}catch(e){a.formula=""}return a.formula},a.value=a.derivedValue.call(f,{form:a.owner,field:a}),a.owner.on("input",function(e,t){t.initial=e,e.set.call(null,e.derivedValue.call(null,t))}.bind(null,a)),a.owner.on("initialized",function(e,t){t.field=t.initial=e,e.set.call(null,e.derivedValue.call(null,t))}.bind(null,a))):a.fillable&&(a.value=_.defaults({value:t[a.name]},a,{value:""}).value),a.index=a.index||l||0,a.label=gform.renderString(a.item.label||a.label,a),a.satisfied=a.satisfied||gform.types[a.type].satisfied.bind(a),a.update=gform.types[a.type].update.bind(a),a.destroy=gform.types[a.type].destroy.bind(a),gform.types[a.type].trigger?a.trigger=gform.types[a.type].trigger.bind(a):a.trigger=a.owner.trigger,a.active=function(){return this.parent.active()&&this.editable&&this.parsable&&this.visible},a.set=function(e,t){this.value==e&&null!=e||gform.types[this.type].set.call(this,e)||(this.value=e,t||this.parent.trigger(["change"],this))}.bind(a),a.get=a.get||gform.types[a.type].get.bind(a),a.toString=gform.types[a.type].toString.bind(a),Object.defineProperty(a,"display",{get:gform.types[a.type].display||function(){return this.toString()}}),Object.defineProperty(a,"sibling",{get:function(){var e=this.parent.filter({array:{ref:this.array.ref}},1);return e.length&&e[0]!==this}}),Object.defineProperty(a,"path",{get:function(){var e="/";return this.ischild&&(e=this.parent.path+"."),e+=this.name,this.array&&(e+="."+this.id),e}}),Object.defineProperty(a,"relative",{get:function(){var e="/";return this.ischild&&(e=this.parent.relative+"."),e+this.name}}),Object.defineProperty(a,"count",{get:function(){return(this.index||0)+1}}),a.render=a.render||gform.types[a.type].render.bind(a),a.el=gform.types[a.type].create.call(a),gform.types[a.type].setLabel.call(a),typeof a.container){case"string":a.container=a.el.querySelector(a.container);break;case"undefined":a.container=a.el.querySelector("fieldset")||a.el||null}if(void 0!==gform.types[a.type].reflow&&(a.reflow=gform.types[a.type].reflow.bind(a)||null),void 0!==gform.types[a.type].find&&(a.find=gform.types[a.type].find.bind(a)||null),void 0!==gform.types[a.type].filter&&(a.filter=gform.types[a.type].filter.bind(a)||null),a.section?a.section&&a.owner.el.querySelector("."+a.owner.options.sections+"-content").appendChild(a.el):gform.layout.call(this,a),gform.types[a.type].initialize.call(a),a.isActive=!0,a.fields){var h;h=this.options.strict?a.array&&"object"==typeof t[a.name]?t[a.name][n||0]||{}:t[a.name]||{}:a.array&&"object"==typeof(t[a.name]||a.owner.options.data[a.name])?(t[a.name]||a.owner.options.data[a.name])[n||0]||{}:t[a.name]||(a.owner.options.data||{})[a.name]||{},a.fields=_.map(a.fields,gform.createField.bind(this,a,h,null,null)),a.array&&(_.each(a.fields,gform.inflate.bind(this,h)),a.reflow()),a.update()}return _.isArray(a.data)&&_.each(a.data,function(e){"string"==typeof e.key&&""!==e.key&&void 0===a[e.key]&&Object.defineProperty(a,e.key,{get:function(e,t){return _.find(t.data,{key:e}).value}.bind(null,e.key,a),set:function(t,i,n){_.find(i.data,{key:t}).value=n,i.parent.trigger(e.key,i)}.bind(null,e.key,a),configurable:!0})}),a},gform.reflow=function(){(this.isActive||void 0!==this.owner&&this.owner.isActive)&&(_.each(this.rows,function(e,t){if(void 0!==e)try{e.container.removeChild(e.ref)}catch(e){}}.bind(this)),this.rows=[],_.each(this.fields,function(e){gform.layout.call(this,e)}.bind(this)))},gform.types={input:{base:"input",defaults:{},row:function(){return"<div></div>"},setup:function(){gform.types[this.type].setLabel.call(this)},setLabel:function(){var e=gform.renderString((this.format||{title:null}).title||this.item.title||this.item.label||this.label,this);this.required&&(e+=this.requiredText+this.suffix);var t=this.el.querySelector("label");null!==t&&(t.innerHTML=e)},create:function(){var e=document.createElement("span");return e.setAttribute("id",this.id),gform.addClass(e,gform.columnClasses[this.columns]),gform.addClass(e,gform.offsetClasses[this.offset]),gform.toggleClass(e,"gform_isArray",!!this.array),e.innerHTML=this.render(),e},render:function(){return gform.render(this.type,this).split('value=""').join('value="'+_.escape(this.value)+'"')},destroy:function(){this.el.removeEventListener("change",this.onchangeEvent),this.el.removeEventListener("input",this.onchangeEvent)},initialize:function(){this.onchangeEvent=function(e){if(this.value=this.get(),null!=this.el.querySelector(".count")){var t=(this.value+"").length;this.limit>1&&(t+="/"+this.limit),this.el.querySelector(".count").innerHTML=t}gform.types[this.type].setup.call(this),this.parent.trigger(["change"],this,{input:this.value}),e&&this.parent.trigger(["input"],this,{input:this.value})}.bind(this),this.input=this.input||!1,this.el.addEventListener("input",this.onchangeEvent.bind(null,!0)),this.el.addEventListener("change",this.onchangeEvent.bind(null,!1))},update:function(e,t){var i=this.el;void 0===e||void 0===typeof e.options&&void 0===typeof e.max&&void 0===typeof e.action||void 0===this.mapOptions||(delete this.mapOptions,this.item=_.defaults({},e,this.item),this.options=_.extend([],this.item.options),this.max=this.item.max,this.min=this.item.min,this.path=this.item.path,this.action=this.item.action),"object"==typeof e&&(_.extend(this,e),this.item=_.extend(this.item,e)),this.label=gform.renderString((e||{}).label||this.item.label,this),this.destroy(),this.el=gform.types[this.type].create.call(this),i.parentNode.replaceChild(this.el,i),gform.types[this.type].initialize.call(this),this.el.style.display=this.visible?"block":"none",gform.types[this.type].edit.call(this,this.editable),t||this.parent.trigger(["change"],this),"function"==typeof gform.types[this.type].setup&&gform.types[this.type].setup.call(this)},get:function(){return this.el.querySelector('input[name="'+this.name+'"]').value},set:function(e){this.el.querySelector('input[name="'+this.name+'"]').value=e},toString:function(e,t){return t?this.value:"<dt>"+this.label+"</dt> <dd>"+(this.value||"(empty)")+"</dd><hr>"},display:function(){return this.value||"(empty)"},satisfied:function(e){return e=e||this.value,_.isArray(e)?!!e.length:null!=e&&""!==e&&!("number"==typeof e&&isNaN(e))},edit:function(e){this.el.querySelector('[name="'+this.name+'"]').disabled=!e},find:function(){return this},focus:function(){this.el.querySelector('[name="'+this.name+'"]').focus();var e=this.value;this.set(""),this.set(e)}},bool:{base:"bool",defaults:{options:[!1,!0]},render:function(){return this.strict||0!=this.options[0]||1!=this.options[1]||(this.value=!!this.value),void 0===this.mapOptions&&(this.mapOptions=new gform.mapOptions(this,this.value,0,this.owner.collections),this.mapOptions.on("change",function(){this.options=this.mapOptions.getoptions(),this.update()}.bind(this))),this.options=this.mapOptions.getoptions(),gform.render(this.type,this)},setLabel:function(){var e=gform.renderString((this.format||{title:null}).title||this.item.title||this.item.label||this.label,this);this.required&&(e+=this.requiredText+this.suffix);var t=this.el.querySelector("label[for="+this.name+"]");null!==t&&(t.innerHTML=e)},initialize:function(){this.onchangeEvent=function(e){this.value=this.get(),(_.find(this.options,{selected:!0})||{selected:null}).selected=!1,(_.find(this.options,{value:this.value})||this.options[0]||{value:""}).selected=!0,gform.types[this.type].setup.call(this),this.parent.trigger(["change","input"],this,{input:this.value})}.bind(this),this.el.addEventListener("input",this.onchangeEvent.bind(null,!0)),this.el.addEventListener("change",this.onchangeEvent.bind(null,!1))},set:function(e){this.el.querySelector('input[name="'+this.name+'"]').checked=e==this.options[1].value},get:function(){return this.options[this.el.querySelector('input[name="'+this.name+'"]').checked?1:0].value},satisfied:function(e){return(e=e||this.value)==this.options[1].value},toString:function(e,t){return t?this.value:"<dt>"+this.label||this.name+"</dt> <dd>"+(this.value||"(empty)")+"</dd><hr>"}},collection:{base:"collection",defaults:{format:{label:"{{{label}}}",value:function(e){return"undefined"!==e.value?e.value:(e.label||e.index).toLowerCase().split(" ").join("_")}}},toString:function(e,t){return t?this.multiple?this.value.length?_.reduce(this.value,function(e,t){var i=_.find(this.list,{value:t});return e.push(i.label),e}.bind(this),[])+"<hr>":"":(_.find(this.list,{value:this.value})||{label:""}).label:this.multiple?this.value.length?_.reduce(this.value,function(e,t){var i=_.find(this.list,{value:t});return void 0!==i&&(e+="<dd>"+i.label+"</dd>"),e}.bind(this),"<dt>"+this.label+"</dt> ")+"<hr>":"<dt>"+this.label+"</dt> <dd>(no selection)</dd><hr>":"<dt>"+this.label+"</dt> <dd>"+((_.find(this.list,{value:this.value})||{label:""}).label||"(no selection)")+"</dd><hr>"},display:function(){return this.multiple?this.value.length?"<ul>"+_.reduce(this.value,function(e,t){var i=_.find(this.list,{value:t});return void 0!==i&&(e+="<li>"+i.label+"</li>"),e}.bind(this),"")+"</ul>":"(no selection)":(_.find(this.list,{value:this.value})||{label:""}).label||"(no selection)"},render:function(){return void 0===this.mapOptions&&(this.mapOptions=new gform.mapOptions(this,this.value,0,this.owner.collections),this.mapOptions.on("change",function(){this.options=this.mapOptions.getobject(),this.list=this.mapOptions.getoptions(),this.mapOptions.waiting||(this.multiple?(_.isArray(this.value)||(this.value=[this.value]),_.each(this.value,function(e){(_.find(this.list,{value:e})||{selected:null}).selected=!0}.bind(this))):((_.find(this.list,{selected:!0})||{selected:null}).selected=!1,(_.find(this.list,{value:this.value})||{value:""}).selected=!0)),this.update()}.bind(this)),this.mapOptions.on("collection",function(e){e.field.field.owner.trigger("collection",e.field.field)})),this.options=this.mapOptions.getobject(),this.list=this.mapOptions.getoptions(),this.mapOptions.waiting||(this.multiple?(_.isArray(this.value)||(this.value=[this.value]),(_.find(this.list,{selected:!0})||{selected:null}).selected=!1,_.each(this.value,function(e){(_.find(this.list,{value:e})||{selected:null}).selected=!0}.bind(this))):(void 0===_.find(this.list,{value:this.value})&&this.other&&(this.value="other"),this.other&&void 0===_.find(this.list,{value:"other"})&&this.options.push({label:"Other",value:"other"}),(_.find(this.list,{selected:!0})||{selected:null}).selected=!1,(_.find(this.list,{value:this.value})||{value:""}).selected=!0)),gform.render(this.type,this)},setup:function(){if(this.multiple&&"undefinded"!=typeof this.limit&&(this.get().length>=this.limit?(this.maxSelected=!0,_.each(this.el.querySelector("select").options,function(e){e.disabled=!e.selected})):this.maxSelected&&(this.maxSelected=!1,_.each(this.el.querySelector("select").options,function(e){e.disabled=!1})),null!=this.el.querySelector(".count"))){var e=this.get().length;this.limit>1&&(e+="/"+this.limit),this.el.querySelector(".count").innerHTML=e}gform.types[this.type].setLabel.call(this)},initialize:function(){this.el.addEventListener("change",function(){if(this.value=this.get(),this.multiple?(_.isArray(this.value)||(this.value=[this.value]),_.each(this.value,function(e){(_.find(this.list,{value:e})||{selected:null}).selected=!0}.bind(this))):((_.find(this.list,{selected:!0})||{selected:null}).selected=!1,(_.find(this.list,{value:this.value})||{value:""}).selected=!0),null!=this.el.querySelector(".count")){var e=this.value.length;this.limit>1&&(e+="/"+this.limit),this.el.querySelector(".count").innerHTML=e}gform.types[this.type].setup.call(this),this.parent.trigger(["change","input"],this,{input:this.value})}.bind(this)),gform.types[this.type].set.call(this,this.value)},get:function(){var e=this.el.querySelector("select").value;if(search=_.find(this.list,{i:parseInt(e,10)}),e="undefined"==typeof search?this.other?"other":null:search.value,this.multiple){var t=this;e=_.transform(this.el.querySelector("select").options,function(e,i){if(i.selected){var n=_.find(t.list,{i:parseInt(i.value)});void 0!==n&&e.push(n.value)}},[])}return e},set:function(e){if(this.multiple){if(_.isArray(e)||(e=[e]),"undefinded"!=typeof this.limit&&e.length>this.limit)return!0;_.each(this.el.querySelector("select").options,function(t){var i=_.find(this.list,{i:parseInt(t.value)});t.selected=void 0!==i&&e.indexOf(i.value)>=0}.bind(this))}else{var t=_.find(this.list,{value:e});this.el.querySelector("select").value=void 0!==t?t.i:null}"function"==typeof gform.types[this.type].setup&&gform.types[this.type].setup.call(this)},focus:function(){var e=this.name;this.multiple&&(e+="[]"),this.el.querySelector('[name="'+e+'"]').focus()},edit:function(e){var t=this.name;this.multiple&&(t+="[]"),this.isEditable=e||this.isEditable||!0,void 0!==this.mapOptions&&this.mapOptions.waiting?this.el.querySelector('[name="'+t+'"]').disabled=!0:this.el.querySelector('[name="'+t+'"]').disabled=!this.isEditable}},section:{base:"section",filter:function(e,t){return gform.filter.call(this,e,t)},setLabel:function(){if(this.item.label){var e=gform.renderString(this.item.label||this.label,this);this.required&&(e+=this.requiredText+this.suffix);var t=this.el.querySelector("fieldset#"+this.id+">legend");null!==t&&(t.innerHTML=e)}},create:function(){var e=gform.create(this.render());return gform.addClass(e,gform.columnClasses[this.columns]),gform.addClass(e,gform.offsetClasses[this.offset]),gform.toggleClass(e,"gform_isArray",!!this.array),e},initialize:function(){this.rows=[]},render:function(){return this.section?gform.render(this.owner.options.sections+"_fieldset",this):gform.render("_fieldset",this)},update:function(e,t){"object"==typeof e&&_.extend(this.item,e),this.label=gform.renderString((e||{}).label||this.item.label,this);var i=this.el;this.destroy(),this.el=gform.types[this.type].create.call(this),i.parentNode.replaceChild(this.el,i),gform.types[this.type].initialize.call(this),this.el.style.display=this.visible?"block":"none",gform.types[this.type].edit.call(this,this.editable),this.container=this.el.querySelector("fieldset")||this.el||null,this.reflow(),t||this.parent.trigger(["change"],this)},get:function(e){return gform.toJSON.call(this,e)},toString:function(e,t){return t?gform.toString.call(this,e,t):"<h4>"+this.label+'</h4><hr><dl style="margin-left:10px">'+gform.toString.call(this,e)+"</dl>"},display:function(){return'<div class="list-group-item ">'+gform.toString.call(this,name)+"</div>"},set:function(e){return null==e||""==e?gform.each.call(this,function(e){e.set("")}):_.each(e,function(e,t){var i=this.find(t);if(i.array&&_.isArray(e)){var n=this.filter({array:{ref:i.array.ref}},1);n.length>1&&_.each(n.slice(1),function(e){var t=_.findIndex(e.parent.fields,{id:e.id});e.parent.fields.splice(t,1)});var s=function(e,t,i){gform.toggleClass(i.querySelector(e),"hidden",t)};_.isArray(e)&&i.set(e[0]);var r={};r[i.name]=e,gform.inflate.call(this.owner,r,i,_.findIndex(i.parent.fields,{id:i.id}),i.parent.fields);var o=this.filter({array:{ref:i.array.ref}},1).length;_.each(i.operator.container.querySelectorAll(".gform_isArray"),s.bind(null,'[data-ref="'+i.array.ref+'"] .gform-add',o>=(i.array.max||5))),_.each(i.operator.container.querySelectorAll(".gform_isArray"),s.bind(null,'[data-ref="'+i.array.ref+'"] .gform-minus',!(o>(i.array.min||1)))),i.operator.reflow()}else void 0!==i&&i.set(e)}.bind(this)),!0},find:function(e){return gform.find.call(this,e)},reflow:function(){gform.reflow.call(this)},focus:function(){void 0!==this.fields&&this.fields.length&&gform.types[this.fields[0].type].focus.call(this.fields[0])},satisfied:function(e){return null!=(e=e||this.get())&&""!==e&&!("object"==typeof e&&_.isEmpty(e))},trigger:function(e,t,i){"string"==typeof e&&(e=[e]);var n=_.extend([],e);_.each(e,function(e){"-1"==e.indexOf(":")&&n.unshift(e+":"+this.name)}.bind(this)),this.parent.trigger(_.uniq(n),t,i)}},button:{base:"button",setLabel:function(){var e=gform.renderString((this.format||{title:null}).title||this.item.title||this.item.label||this.label,this);this.required&&(e+=this.requiredText+this.suffix);var t=this.el;null!==t&&(t.innerHTML=e)},toString:function(){return""},defaults:{parse:!1,columns:2,target:".gform-footer"},create:function(){var e=gform.create(this.render());return e.setAttribute("id",this.id),e},initialize:function(){this.action=this.action||(this.label||"").toLowerCase().split(" ").join("_"),this.onclickEvent=function(){this.editable&&this.parent.trigger(this.action,this)}.bind(this),this.el.addEventListener("click",this.onclickEvent)},render:function(){return gform.render("button",this)},satisfied:function(e){return this.editable&&this.visible},update:function(e,t){"object"==typeof e&&_.extend(this,this.item,e),this.label=gform.renderString((e||{}).label||this.item.label,this);var i=this.el;this.destroy(),this.el=gform.types[this.type].create.call(this),i.parentNode.replaceChild(this.el,i),gform.types[this.type].initialize.call(this),this.el.style.display=this.visible?"block":"none",gform.types[this.type].edit.call(this,this.editable)},destroy:function(){this.el.removeEventListener("click",this.onclickEvent)},get:function(e){return null},set:function(e){},edit:function(e){this.editable=e,this.el.disabled=!e,gform.toggleClass(this.el,"disabled",!e)},focus:function(){this.el.focus()}}},gform.types.text=gform.types.password=gform.types.color=gform.types.input,gform.types.number=_.extend({},gform.types.input,{get:function(){return parseInt(this.el.querySelector('input[name="'+this.name+'"]').value,10)},render:function(){return gform.render(this.type,this).split('value=""').join('value="'+this.value+'"')}}),gform.types.hidden=_.extend({},gform.types.input,{defaults:{columns:!1},toString:function(){return""}}),gform.types.output=_.extend({},gform.types.input,{toString:function(){return""},display:function(){return gform.renderString((this.format||{}).value||"{{{value}}}",this)},render:function(){return gform.render(this.type,this)},get:function(){return this.value},set:function(e){this.value=e,this.el.querySelector("output").innerHTML=this.display}}),gform.types.email=_.extend({},gform.types.input,{defaults:{validate:[{type:"valid_email"}]}}),gform.types.textarea=_.extend({},gform.types.input,{set:function(e){this.el.querySelector('textarea[name="'+this.name+'"]').value=e},get:function(){return this.el.querySelector('textarea[name="'+this.name+'"]').value}}),gform.types.switch=gform.types.checkbox=_.extend({},gform.types.input,gform.types.bool),gform.types.fieldset=_.extend({},gform.types.input,gform.types.section),gform.types.select=_.extend({},gform.types.input,gform.types.collection,{render:function(){if(void 0===this.mapOptions&&(this.mapOptions=new gform.mapOptions(this,this.value,0,this.owner.collections),this.mapOptions.on("change",function(){if(this.options=this.mapOptions.getobject(),this.list=this.mapOptions.getoptions(),this.other&&void 0===_.find(this.list,{value:"other"})&&(this.options.push({label:"Other",value:"other"}),this.list.push({label:"Other",value:"other"})),"string"==typeof this.placeholder&&(this.options.unshift({label:this.placeholder,value:"",i:-1,editable:!1,visible:!1,selected:!0}),this.list.unshift({label:this.placeholder,value:"",i:-1,editable:!1,visible:!1,selected:!0})),!this.mapOptions.waiting)if(this.multiple)_.isArray(this.value)||(this.value=[this.value]),_.each(this.value,function(e){(_.find(this.list,{value:e})||{selected:null}).selected=!0}.bind(this));else{(_.find(this.list,{selected:!0})||{selected:null}).selected=!1;var e=_.find(this.list,{value:this.value});void 0===e?"string"==typeof this.placeholder?this.value="":(this.value=(this.list[0]||{value:""}).value,this.list.length&&(this.list[0].selected=!0)):e.selected=!0}this.update()}.bind(this)),this.mapOptions.on("collection",function(e){e.field.field.owner.trigger("collection",e.field.field)})),this.options=this.mapOptions.getobject(),this.list=this.mapOptions.getoptions(),"string"==typeof this.placeholder&&(this.options.unshift({label:this.placeholder,value:"",i:-1,editable:!1,visible:!1,selected:!0}),this.list.unshift({label:this.placeholder,value:"",i:-1,editable:!1,visible:!1,selected:!0})),!this.mapOptions.waiting)if(this.multiple)_.isArray(this.value)||(this.value=[this.value]),(_.find(this.list,{selected:!0})||{selected:null}).selected=!1,_.each(this.value,function(e){(_.find(this.list,{value:e})||{selected:null}).selected=!0}.bind(this));else{this.other&&void 0===_.find(this.list,{value:"other"})&&(this.options.push({label:"Other",value:"other"}),this.list.push({label:"Other",value:"other"})),(_.find(this.list,{selected:!0})||{selected:null}).selected=!1;var e=_.find(this.list,{value:this.value});void 0===e?this.other?this.value="other":"string"==typeof this.placeholder?this.value="":(this.value=(this.list[0]||{value:""}).value,this.list.length&&(this.list[0].selected=!0)):e.selected=!0}return gform.render("select",this)}}),gform.types.range=_.extend({},gform.types.input,gform.types.collection,{get:function(){return(this.el.querySelector("[type=range]")||{value:""}).value},set:function(e){this.el.querySelector("[type=range]").value=e}}),gform.types.radio=_.extend({},gform.types.input,gform.types.collection,{setup:function(){if(this.multiple&&"undefinded"!=typeof this.limit&&(this.get().length>=this.limit?(this.maxSelected=!0,_.each(this.el.querySelectorAll("[type=checkbox]"),function(e){e.disabled=!e.checked})):this.maxSelected&&(this.maxSelected=!1,_.each(this.el.querySelectorAll("[type=checkbox]"),function(e){e.disabled=!1})),null!=this.el.querySelector(".count"))){var e=this.get().length;this.limit>1&&(e+="/"+this.limit),this.el.querySelector(".count").innerHTML=e}gform.types[this.type].setLabel.call(this)},render:function(){return void 0!==this.item.size&&(this.size=Math.floor((gform.columns||12)/this.item.size)),void 0===this.mapOptions&&(this.mapOptions=new gform.mapOptions(this,this.value,0,this.owner.collections),this.mapOptions.on("change",function(){this.options=this.mapOptions.getoptions(),this.list=this.mapOptions.getoptions(),this.multiple?(_.isArray(this.value)||(this.value=[this.value]),_.each(this.value,function(e){(_.find(this.list,{value:e})||{selected:null}).selected=!0}.bind(this))):((_.find(this.list,{selected:!0})||{selected:null}).selected=!1,(_.find(this.list,{value:this.value})||{value:""}).selected=!0),this.update()}.bind(this)),this.mapOptions.on("collection",function(e){e.field.field.owner.trigger("collection",e.field.field)})),this.options=this.mapOptions.getoptions(),this.list=this.mapOptions.getoptions(),this.mapOptions.waiting||(this.multiple?(_.isArray(this.value)||(this.value=[this.value]),(_.find(this.list,{selected:!0})||{selected:null}).selected=!1,_.each(this.value,function(e){(_.find(this.list,{value:e})||{selected:null}).selected=!0}.bind(this))):(void 0===_.find(this.list,{value:this.value})&&this.other&&(this.value="other"),this.other&&void 0===_.find(this.list,{value:"other"})&&this.options.push({label:"Other",value:"other"}),(_.find(this.list,{selected:!0})||{selected:null}).selected=!1,(_.find(this.list,{value:this.value})||{value:""}).selected=!0)),gform.render(this.type,this)},get:function(){if(this.multiple){var e=this;return _.transform(this.el.querySelectorAll('[type="checkbox"]:checked'),function(t,i){t.push(_.find(e.list,{i:parseInt(i.value)}).value).bind},[])}return(_.find(this.list,{i:parseInt((this.el.querySelector('[type="radio"]:checked')||{value:null}).value)})||{value:""}).value},set:function(e){if(this.multiple){if(_.isArray(e)||(e=[e]),"undefinded"!=typeof this.limit&&e.length>this.limit)return!0;_.each(this.el.querySelectorAll("[type=checkbox]"),function(t){var i=_.find(this.list,{i:parseInt(t.value)});t.selected=void 0!==i&&e.indexOf(i.value)>=0}.bind(this))}else{var t=(_.find(this.list,{value:e})||{i:""}).i,i=this.el.querySelector('[value="'+t+'"]');null!==i&&(i.checked="checked")}"function"==typeof gform.types[this.type].setup&&gform.types[this.type].setup.call(this)},edit:function(e){_.each(this.el.querySelectorAll("input"),function(t){t.disabled=!e})},focus:function(){this.el.querySelector('[type="radio"],[type="checkbox"]').focus()}}),gform.types.scale=_.extend({},gform.types.radio),gform.types.checkboxes=_.extend({},gform.types.radio,{multiple:!0}),gform.types.grid=_.extend({},gform.types.input,gform.types.section,gform.types.collection,{render:function(){return void 0===this.mapOptions&&(this.mapOptions=new gform.mapOptions(this,this.value,0,this.owner.collections),this.mapOptions.on("change",function(){this.options=this.mapOptions.getobject(),this.list=this.mapOptions.getoptions(),this.update()}.bind(this))),this.options=this.mapOptions.getobject(),this.list=this.mapOptions.getoptions(),this.fields=_.map(this.fields,function(e){return _.assignIn({name:(gform.renderString(e.label)||"").toLowerCase().split(" ").join("_"),id:gform.getUID(),label:e.name},e)}),gform.render(this.type,this)},setup:function(){this.multiple&&"undefinded"!=typeof this.limit&&_.each(this.fields,function(e){(this.value[e.name]||[]).length>=this.limit?(e.maxSelected=!0,_.each(this.el.querySelectorAll('[type=checkbox][name="'+e.id+'"]'),function(e){e.disabled=!e.checked})):e.maxSelected&&(e.maxSelected=!1,_.each(this.el.querySelectorAll('[type=checkbox][name="'+e.id+'"]'),function(e){e.disabled=!1}))}.bind(this)),gform.types[this.type].setLabel.call(this)},initialize:function(){this.el.addEventListener("change",function(){this.value=this.get(),gform.types[this.type].setup.call(this),this.parent.trigger(["change","input"],this,{input:this.value})}.bind(this)),gform.types[this.type].setup.call(this),this.rows=[],this.fields=_.map(this.fields,function(e){return e.type="hidden",e})},get:function(){return this.multiple?_.transform(this.fields,function(e,t){e[t.name]=_.transform(this.el.querySelectorAll('[type="checkbox"][name="'+t.id+'"]:checked'),function(e,t){e.push(t.value)},[])}.bind(this),{}):_.transform(this.fields,function(e,t){e[t.name]=(this.el.querySelector('[type="radio"][name="'+t.id+'"]:checked')||{value:""}).value}.bind(this),{})},set:function(e){this.multiple?_.each(this.fields,function(e,t){if("undefinded"!=typeof this.limit&&null!=e&&e.length>this.limit)return!0;_.each(this.el.querySelectorAll('[name="'+t.id+'"][type=checkbox]'),function(e,t){t.checked=e.indexOf(t.value)>=0}.bind(this,e[t.name]))}.bind(this,e)):_.each(this.fields,function(t){var i=this.querySelector('[name="'+t.id+'"][value="'+e[t.name]+'"]');null!==i&&(i.checked="checked")}.bind(this)),this.value=e,gform.types.grid.setup.call(this)},focus:function(){this.el.querySelector('[name="'+this.fields[0].id+'"]').focus()}}),gform.types.template=_.extend({},gform.types.input,gform.types.section,{row:function(){return gform.render("template",this)},rowSelector:".gform-template_row",initialize:function(){this.rows=[],this.owner.on("appended",function(e,t){e==t.field.id&&t.field.el.click()}.bind(null,this.id)),this.owner.on("close",function(e,t){e==t.field.id&&(t.field.modal("hide"),t.field.modalEl.querySelector(".gform-modal_body").removeChild(t.field.container),t.field.container.removeEventListener("click",t.form.listener),t.field.value=t.field.get(),t.field.update(),t.form.trigger("done",this))}.bind(null,this.id))},display:function(){return gform.m(this.format.template,this)},render:function(){return gform.m(gform.render("template_item",this),this)},edit:function(e){e.target.classList.contains("gform-minus")||e.target.classList.contains("gform-add")||!(null==this.el.querySelector(".gform-edit")||this.el.querySelector(".gform-edit")&&e.target.classList.contains("gform-edit")||this.el.querySelector(".gform-edit").contains(e.target))||(e.preventDefault(),this.modalEl=gform.create(gform.render("modal_container",{body:'<div class="gform-modal_body"></div>',footer:gform.render("child_modal_footer"),legend:this.label,name:"preview"})),this.container.addEventListener("click",this.owner.listener),this.modalEl.querySelector(".gform-modal_body").appendChild(this.container),this.modal=gform.prototype.modal.bind(this),this.modal(),this.modalEl.querySelector(".done").addEventListener("click",function(e){this.owner.trigger("close",this)}.bind(this)),this.modalEl.querySelector(".gform-footer .gform-minus").addEventListener("click",function(){e.stopPropagation(),e.preventDefault(),this.modal("hide"),this.modalEl.querySelector(".gform-modal_body").removeChild(this.container),this.container.removeEventListener("click",this.owner.listener),gform.removeField.call(this.owner,this)}.bind(this)))},create:function(){var e=gform.create(this.render());return gform.toggleClass(e,"gform_isArray",!!this.array),this.container=gform.create("<fieldset></fieldset>"),e.addEventListener("click",gform.types.template.edit.bind(this)),e},update:function(e,t){"object"==typeof e&&_.extend(this.item,e),this.label=gform.renderString((e||{}).label||this.item.label,this),this.el.querySelector(".gform-template_container").innerHTML=gform.m(this.format.template,_.extend({},gform.stencils,this)),t||this.parent.trigger(["change"],this)}}),gform.types.table=_.extend({},gform.types.input,gform.types.section,{row:function(){return gform.render("table",this)},rowSelector:"tbody",initialize:function(){this.rows=[],this.owner.on("appended",function(e,t){e==t.field.id&&t.field.el.click()}.bind(null,this.id)),this.owner.on("close",function(e,t){e==t.field.id&&(t.field.modal("hide"),t.field.modalEl.querySelector(".gform-modal_body").removeChild(t.field.container),t.field.container.removeEventListener("click",t.form.listener),t.field.value=t.field.get(),t.field.update(),"undefined"!=typeof $&&void 0!==$.bootstrapSortable&&$.bootstrapSortable({applyLast:!0}),t.form.trigger("done",this))}.bind(null,this.id))},render:function(e){(e=e||this.el).innerHTML="",_.each(this.fields,function(t){if(void 0!==t.display)var i=gform.create(t.display);else i=document.createTextNode((this.value||{})[t.name]||t.value||"");if(t.sibling)e.querySelector("#"+t.array.ref).appendChild(i);else{var n=document.createElement("td");void 0!==t.array&&n.setAttribute("id",t.array.ref),n.appendChild(i),e.appendChild(n)}}.bind(this))},display:function(){return this.toString()},edit:function(e){e.target.classList.contains("gform-minus")||e.target.classList.contains("gform-add")||(e.preventDefault(),this.modalEl=gform.create(gform.render("modal_container",{body:'<div class="gform-modal_body"></div>',footer:gform.render("child_modal_footer"),legend:this.label,name:"preview"})),this.container.addEventListener("click",this.owner.listener),this.modalEl.querySelector(".gform-modal_body").appendChild(this.container),this.modal=gform.prototype.modal.bind(this),this.modal(),this.modalEl.querySelector(".done").addEventListener("click",function(e){this.owner.trigger("close",this)}.bind(this)),this.modalEl.querySelector(".gform-footer .gform-minus").addEventListener("click",function(){e.stopPropagation(),e.preventDefault(),this.modal("hide"),this.modalEl.querySelector(".gform-modal_body").removeChild(this.container),this.container.removeEventListener("click",this.owner.listener),gform.removeField.call(this.owner,this)}.bind(this)))},create:function(){var e=document.createElement("tr");return gform.addClass(e,"gform-edit"),this.render(e),e.setAttribute("id",this.id),gform.toggleClass(e,"gform_isArray",!!this.array),this.container=gform.create("<fieldset></fieldset>"),e.removeEventListener("click",gform.types.table.edit.bind(this)),e.addEventListener("click",gform.types.table.edit.bind(this)),e},update:function(e,t){"object"==typeof e&&_.extend(this.item,e),this.label=gform.renderString((e||{}).label||this.item.label,this),this.render(),t||this.parent.trigger(["change"],this)}}),gform.types.custom_radio=_.extend({},gform.types.input,gform.types.collection,{set:function(e){this.el.querySelector('[data-value="'+e+'"]').click()},defaults:{selectedClass:"btn btn-success",defaultClass:"btn btn-default"},get:function(){return(this.el.querySelector("."+this.selectedClass.split(" ").join("."))||{dataset:{value:""}}).dataset.value},toggle:function(e){var t=this.el.querySelector("."+this.selectedClass.split(" ").join("."));gform.toggleClass(t,this.selectedClass,!1),gform.toggleClass(t,this.defaultClass,!0),gform.toggleClass(e.target,this.defaultClass,!1),gform.toggleClass(e.target,this.selectedClass,!0),this.owner.trigger("change",this),this.owner.trigger("input",this)},initialize:function(){var e=this.el.querySelectorAll("a");for(const t of e)t.removeEventListener("click",gform.types[this.type].toggle.bind(this)),t.addEventListener("click",gform.types[this.type].toggle.bind(this))}}),gform.processConditions=function(e,t){if("string"==typeof e&&("show"!==e&&"edit"!==e&&"parse"!==e||(e=this.item[e]),void 0!==e&&0==e.indexOf("method:")&&void 0!==this.owner.methods&&"function"==typeof this.owner.methods[e.split("method:")[1]]&&t.call(this,this.owner.methods[e.split("method:")[1]].call(null,{form:this.owner,field:this}),{form:this.owner,field:this})),"boolean"==typeof e&&t.call(this,e,{form:this.owner,field:this}),"function"==typeof e&&t.call(this,e.call(null,{form:this.owner,field:this}),{form:this.owner,field:this}),"object"==typeof e){var i=function(e,t,i){t.call(this,gform._rules.call(this,e),i)}.bind(this,e,t);gform._subscribeByName.call(this,e,i)}return!0},gform._subscribeByName=function(e,t){for(var i in e)if("object"==typeof e[i].conditions)gform._subscribeByName.call(this,e[i].conditions,t);else{var n=this.parent.find(e[i].name);0!==(e[i].name||this.name).indexOf("/")&&void 0!==n?(this.eventlist=this.eventlist||[],this.owner.on("change:"+n.path,t,this.eventlist)):this.owner.on("change:"+(e[i].name||this.name),t)}},gform._rules=function(e,t){return t=t||"and",_.reduce(e,function(e,i){var n;return n=void 0!==i.conditions?gform._rules.call(this,i.conditions,i.op):gform.conditions[i.type](this,i),"or"==t?e||n:e&&n}.bind(this),"and"==t)},gform.conditions={requires:function(e,t){var i;if(void 0!==t.name&&t.name){var n=e.parent.filter({name:t.name,parsable:!0},t.depth||10);if(n.length>0)i=n[0];else if(e.name==t.name)i=e;else if(void 0===(i=e.parent.find(t.name)||e.owner.filter({path:t.name},t.depth||10)[0]))return!1}else i=e;return i.satisfied()},not_matches:function(e,t){var i;if(void 0!==t.name&&t.name){var n=e.parent.filter({name:t.name,parsable:!0},t.depth||10);if(n.length>0)i=n[0];else if(e.name==t.name)i=e;else if(void 0===(i=e.parent.find(t.name)||e.owner.filter({path:t.name},t.depth||10)[0]))return!1}else i=e;var s=t[t.attribute||"value"],r=i[t.attribute||"value"];return"object"==typeof s&&null!==s&&null!==r?-1==s.indexOf(r):s!==r},test:function(e,t){return t.test.call(this,e,t)},contains:function(e,t){var i;if(void 0!==t.name&&t.name){var n=e.parent.filter({name:t.name,parsable:!0},t.depth||10);if(n.length>0)i=n[0];else if(e.name==t.name)i=e;else if(void 0===(i=e.parent.find(t.name)||e.owner.filter({path:t.name},t.depth||10)[0]))return!1}else i=e;var s=t.value,r=i,o=null;if(void 0!==r)o=0!=r.array?e.parent.find(t.name).parent.get()[t.name]:r.value;else if(void 0===(i=e.parent.find(t.name)||e.owner.filter({path:t.name},t.depth||10)[0]))return!1;return"object"!=typeof s||null===s||null===o?void 0!==o&&-1!==o.indexOf(s):"object"==typeof o?_.intersection(s,o).length>0:"string"==typeof o?_.some(s,function(e){return o.indexOf(e)>=0}):void 0},matches:function(e,t){var i;if(void 0!==t.name&&t.name){var n=e.parent.filter({name:t.name,parsable:!0},t.depth||10);if(n.length>0)i=n[0];else if(e.name==t.name)i=e;else if(void 0===(i=e.parent.find(t.name)||e.owner.filter({path:t.name},t.depth||10)[0]))return!1}else i=e;var s=t[t.attribute||"value"],r=i[t.attribute||"value"];return"object"==typeof s&&null!==s&&null!==r?-1!==s.indexOf(r):s==r},matches_bool:function(e,t){var i;if(void 0!==t.name&&t.name){var n=e.parent.filter({name:t.name,parsable:!0},t.depth||10);if(n.length>0)i=n[0];else if(e.name==t.name)i=e;else if(void 0===(i=e.parent.find(t.name)||e.owner.filter({path:t.name},t.depth||10)[0]))return!1}else i=e;var s=t[t.attribute||"value"],r=i[t.attribute||"value"];return("false"==s||!s)==("false"==r||!r)},matches_numeric:function(e,t){var i;if(void 0!==t.name&&t.name){var n=e.parent.filter({name:t.name,parsable:!0},t.depth||10);if(n.length>0)i=n[0];else if(e.name==t.name)i=e;else if(void 0===(i=e.parent.find(t.name)||e.owner.filter({path:t.name},t.depth||10)[0]))return!1}else i=e;var s=t[t.attribute||"value"],r=parseInt(i[t.attribute||"value"]);return"object"==typeof s&&null!==s&&null!==r?-1!==_.map(s,function(e){return parseInt(e)}).indexOf(r):parseInt(s)==r}},gform.prototype.errors={},gform.prototype.validate=function(e){return this.valid=!0,_.each(this.fields,gform.validateItem.bind(null,e)),this.valid?this.trigger("valid"):this.trigger("invalid",{errors:this.errors}),this.trigger("validation"),this.valid},gform.handleError=gform.update,gform.validateItem=function(e,t){var i=t.get();if((e||!t.valid||t.required||t.satisfied(i))&&(t.valid=!0,t.errors="",t.parsable&&"object"==typeof t.validate)){var n=gform.validation.call(t,t.validate);if(t.required){var s=!t.satisfied(t.get())&&"{{label}} is required";s&&n.push(gform.renderString(t.required.message||s,{label:t.label,value:i,args:t.required}))}n=_.compact(n),(void 0===t.display||t.visible)&&(t.valid=!n.length,t.errors=n.join("<br>"),gform.handleError(t))}t.parsable&&void 0!==t.fields&&_.each(t.fields,gform.validateItem.bind(null,e)),t.errors?t.owner.trigger("invalid:"+t.name,{errors:t.errors}):t.owner.trigger("valid:"+t.name),t.owner.errors[t.name]=t.errors,t.owner.valid=t.valid&&t.owner.valid},gform.validation=function(e,t){t=t||"and";var i=this.get(),n=_.map(e,function(e,t){if("string"==typeof t.type){if(void 0===t.conditions||gform._rules.call(this,t.conditions)){var n=e[t.type].call(this,i,t);if(n)return gform.renderString(t.message||n,{label:this.label,value:i,args:t})}}else if(void 0!==t.tests)return gform.validation.call(this,t.tests,t.op).join("<br>")}.bind(this,gform.validations));return"and"==t||_.compact(n).length==e.length?n:[]},gform.regex={numeric:/^[0-9]+$/,decimal:/^\-?[0-9]*\.?[0-9]+$/,url:/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,date:/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/,email:/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,6}$/i},gform.validations={none:function(e){return!1},required:function(e){return!this.satisfied(e)&&"{{label}} is required"},pattern:function(e,t){var i=t.regex;return"string"==typeof i&&(i=void 0!==gform.regex[i]?gform.regex[i]:new RegExp(t.regex,t.flags)),!i.test(e)&&""!==e&&t.message},custom:function(e,t){return("function"==typeof t.test||"string"==typeof t.test&&"function"==typeof this.owner.methods[t.test])&&(t.test=this.owner.methods[t.test]||t.test),t.field=this,t.form=this.owner,t.value=e,t.test.call(null,t)},matches:function(e,t){var i=this.parent.find(t.name);return void 0===i?"Matching field not defined":(t.label=i.label,t.value=i.get(),e!=t.value&&'"{{label}}" does not match the "{{args.label}}" field')},date:function(e){return!gform.regex.date.test(e)&&""!==e&&"{{label}} should be in the format MM/DD/YYYY"},valid_url:function(e){return!gform.regex.url.test(e)&&""!==e&&"{{label}} must contain a valid Url"},valid_email:function(e){return!gform.regex.email.test(e)&&""!==e&&"{{label}} must contain a valid email address"},length:function(e,t){return gform.regex.numeric.test(t.max)||gform.regex.numeric.test(t.min)?"number"==typeof t.max&&"number"==typeof t.min&&t.min==t.max?t.min!=e.length&&"{{label}} must be exactly "+t.min+" characters in length":"number"==typeof t.max&&e.length>t.max?"{{label}} must not exceed "+t.max+" characters in length":"number"==typeof t.min&&e.length>0&&e.length<t.min&&"{{label}} must be at least "+t.min+" characters in length":"Invalid length requirement"},numeric:function(e,t){return gform.regex.decimal.test(e)||""===e?"number"==typeof t.min&&parseFloat(e)<parseFloat(t.min)?"{{label}} must contain a number greater than {{args.min}}":"number"==typeof t.max&&parseFloat(e)>parseFloat(t.max)?"{{label}} must contain a number less than {{args.max}}":void 0:"{{label}} must contain only numbers"}};
gform.stencils={_container:'\n    <form novalidate  {{^autocomplete}}autocomplete="false"{{/autocomplete}}>\n    {{#legend}}<legend for="{{name}}"><h4>{{{legend}}}</h4></legend>{{/legend}}\n    </form>\n    <div class="row gform-footer"></div>',text:'\n<div class="row row-wrap">\n<div class="column">\n    {{>_label}}\n    <input{{#limit}} maxlength="{{limit}}"{{/limit}}{{#min}} min="{{min}}"{{/min}}{{#max}} max="{{max}}"{{/max}} {{#step}} step="{{step}}"{{/step}} placeholder="{{placeholder}}" name="{{name}}" type="{{type}}" {{#selected}} checked {{/selected}} value="{{value}}" id="{{id}}" />\n    {{>_error}}\n    </div>\n    </div>\n    {{>_actions}} \n',output:'\n<div class="row row-wrap">\n<div class="column">\n    {{>_label}}\n    <output name="{{name}}" id="{{id}}">{{{display}}}</output>\n    {{>_error}}\n    </div>\n    </div>\n    {{>_actions}} \n',switch:'\n{{>_label}}\n<label class="switch">\n<input name="{{name}}" type="checkbox" {{^editable}}disabled{{/editable}} {{#options.1.selected}}checked=checked{{/options.1.selected}} value="{{value}}" id="{{name}}" />\n<span class="slider round"></span>\n</label>\n    \n    {{>_error}}\n    </div>\n    {{>_actions}}   \n',checkbox:'\n    {{>_label}}\n    <input name="{{name}}" type="{{type}}" {{#options.1.selected}} checked {{/options.1.selected}} value="{{value}}" id="{{name}}" />\n    <label class="label-inline" for="{{name}}"><span class="falseLabel">{{options.0.label}}</span><span class="trueLabel">{{options.1.label}}</span></label>\n    {{>_error}}\n    </div>\n    {{>_actions}}   \n',hidden:'<input name="{{name}}" type="hidden" value="{{value}}" id="{{id}}" />{{>_error}}',textarea:'\n<div class="row row-wrap">\n<div class="column">\n    {{>_label}}\n    {{#limit}}<small class="column count" style="text-align:right">0/{{limit}}</small>{{/limit}}\n    <textarea{{#limit}} maxlength="{{limit}}"{{/limit}} placeholder="{{placeholder}}" name="{{name}}" rows="{{rows}}{{^rows}}3{{/rows}}" type="{{type}}" id="{{id}}" />{{value}}</textarea>\n    {{>_error}}\n    </div>\n    {{>_actions}}   \n</div>\n</div> ',select:'\n    {{>_label}}\n    {{#mapOptions.waiting}}<div style="position:relative;height:0">    <i class="loading" style="width: 30px;height: 30px;position:absolute;top:5px;left:5px"></i>\n    </div>{{/mapOptions.waiting}}\n\n    <select {{#multiple}}multiple=multiple{{/multiple}}  {{#size}}size={{size}}{{/size}}  name="{{name}}{{#multiple}}[]{{/multiple}}" value="{{value}}" id="{{id}}" />\n\n    {{#options}}\n            {{^optgroup}}\n            <option {{#selected}}selected=\'selected\'{{/selected}} {{^editable}}disabled{{/editable}} {{^visible}}hidden{{/visible}}  value="{{i}}">{{{label}}}</option>\n            {{/optgroup}}\n            {{#optgroup}}\n            {{#optgroup.label}}\n            <optgroup label="{{label}}" data-id="{{optgroup.id}} {{^editable}}disabled{{/editable}} {{^visible}}hidden{{/visible}}">\n            {{/optgroup.label}}\n                {{#options}}\n                <option data-id="{{optgroup.id}}" {{#selected}}selected=\'selected\'{{/selected}} {{^editable}}disabled{{/editable}} {{^visible}}hidden{{/visible}}  value="{{i}}">{{{label}}}</option>\n                {{/options}}\n                {{#optgroup.label}}\n            </optgroup>\n            {{/optgroup.label}}\n            {{/optgroup}}\n        {{/options}}\n\n    </select>\n    {{>_error}}\n    {{>_actions}}       \n',radio:'\n    {{>_label}}\n    <span class="">\n    {{#options}}\n\n    {{#multiple}}\n        <div><input name="{{name}}_{{value}}" type="checkbox" {{#selected}} checked {{/selected}} value="{{value}}"/>\n        <label class="noselect label-inline" for="{{name}}_{{value}}">{{label}}</label></div>\n    {{/multiple}}\n    {{^multiple}}\n        <label class="noselect"><input style="margin-right: 5px;" name="{{id}}" {{#selected}} checked=selected {{/selected}}  value="{{i}}" type="radio"><span style="font-weight:normal">{{label}}</span></label>        \n    {{/multiple}}\n    {{/options}}\n    </span>\n    {{>_error}}\n    {{>_actions}}',scale:'\n    {{>_label}}\n    <table class="table table-striped">\n    <thead>\n        <tr>\n            {{#format.low}}<th></th>{{/format.low}}\n            {{#options}}\n            <th><label for="{{name}}_{{i}}">{{{label}}}</label></th>\n            {{/options}}\n            {{#format.high}}<th></th>{{/format.high}}\n        </tr>\n    </thead>\n    <tbody>\n        <tr>\n            {{#format.low}}<td><label style="font-weight: 500;" for="{{name}}_1">{{{format.low}}}</label></td>{{/format.low}}\n            {{#options}}\n            <td>\n                <input id="{{name}}_{{i}}" style="margin-right: 5px;" name="{{id}}" {{#selected}} checked=selected {{/selected}}  value="{{value}}" type="radio">\n            </td>\n            {{/options}}\n            {{#format.high}}<td><label style="font-weight: 500;" for="{{name}}_{{options.length}}">{{{format.high}}}</label></td>{{/format.high}}\n        </tr>\n    </tbody>\n    </table>\n\n    {{>_error}}\n    {{>_actions}}',_fieldset:'<div><fieldset id="{{id}}" name="{{name}}">\n    {{>_error}}\n    {{#array}}<hr style="margin: 0 0 10px;">{{/array}}\n    <div class="row row-wrap">\n    {{^section}}<legend class="column" for="{{name}}"><h5>{{{label}}}</h5></legend>{{/section}}\n    {{>_actions}}\n    </div>\n    </fieldset></div>',grid:'<div class="row row-wrap">\n<fieldset id="{{id}}" name="{{name}}">\n\n    {{>_label}}\n    {{>_error}}\n\n    <table class="table table-striped" style="margin-bottom:0">\n    <thead>\n        <tr>\n            <th></th>\n            {{#options}}\n            <th><label>{{label}}</label></th>\n            {{/options}}\n            \n        </tr>\n    </thead>\n    <tbody>\n    {{#fields}}\n        <tr>\n            <td><label style="font-weight: 500;" for="{{id}}">{{{label}}}</label></td>\n            {{#options}}\n            <td>\n            {{#multiple}}\n                <div><input name="{{id}}" type="checkbox" {{#selected}} checked {{/selected}} value="{{value}}"/>\n            {{/multiple}}\n            {{^multiple}}\n                <input style="margin-right: 5px;" name="{{id}}" {{#selected}} checked=selected {{/selected}}  value="{{value}}" type="radio">\n            {{/multiple}}\n            </td>\n            {{/options}}\n        </tr>\n        {{/fields}}\n    </tbody>\n    </table>\n\n    {{>_actions}}\n\n    </fieldset>\n</div>',_actions:'      \n    {{#array}}\n    <div data-name="{{name}}" data-ref="{{ref}}" class="noprint" style="float:right">\n    <input data-id="{{id}}" style="padding: 0 ;padding:0 1.5rem; border-color:green;color:green;float:right;margin:0 5px" class="gform-add button button-outline" type="button" value="+">\n    <input data-id="{{id}}" style="padding: 0 ;padding:0 1.5rem; border-color:red;color:red;float:right;margin:0 5px" class="gform-minus button button-outline" type="button" value="-">\n    </div>\n    {{/array}}\n',_label:'      \n<label class="" for="{{name}}">{{{label}}}{{#required}}{{{requiredText}}}{{/required}}{{suffix}}</label>     \n<small class="column form-help" style="position:relative;left:-10px"> {{{help}}}</small>\n\n',_error:'<small class="error-text" style="color:red;display:block;position:relative;top:-12px"></small><small class="valid" style="color:green;display:block;"></small>',button:'<button type="button" role="button" class="button noprint {{modifiers}}" style="margin:0 15px 0">{{{label}}}</button>',tab_container:'\n<form id="{{name}}" novalidate {{^autocomplete}}autocomplete="false"{{/autocomplete}} name="{{name}}" class="gform tab-content {{modifiers}}" {{#action}}action="{{action}}"{{/action}} onsubmit="return false;" {{#method}}method="{{method}}"{{/method}}>\n{{^legendTarget}}{{#legend}}<legend>{{{legend}}}</legend>{{/legend}}{{/legendTarget}}\n\t<ul class="tabs">\n\t\t{{#fields}}\n        {{#section}}\n            <a href="#tabs{{id}}" data-toggle="tab"><li {{^index}}class="active"{{/index}}>{{{legend}}}</li></a>\n\t    {{/section}}\t\t\n\t\t{{/fields}}\n    </ul></form>\n\t<div class="footer"></div>',tab_fieldset:'{{#section}}<div class="tab-pane {{^index}}active{{/index}} " id="tabs{{id}}">{{/section}}{{>_fieldset}}{{#section}}</div>{{/section}}',modal_container:'<div class="modal modal-hide">\n<div class="modal-background"></div>\n<div class="modal-card">\n  <header class="modal-card-head {{modal.header_class}}">\n    <legend class="modal-card-title">{{{title}}}{{{legend}}}\n    </legend>\n    <span class="button button-outline close" aria-label="close" style="padding:0 1.5rem;margin:0">X</span>\n  </header>\n  <section class="modal-card-body">\n    {{{body}}}\n    {{^sections}}\n    <form id="{{name}}" style="overflow:hidden" {{^autocomplete}}autocomplete="false"{{/autocomplete}} name="{{name}}" class="gform {{#options.horizontal}} smart-form-horizontal form-horizontal{{/options.horizontal}} {{modifiers}}" {{#action}}action="{{action}}"{{/action}} onsubmit="return false;" {{#method}}method="{{method}}"{{/method}}></form>\n    {{/sections}}\n    {{#sections}}\n    <form id="{{name}}" novalidate {{^autocomplete}}autocomplete="false"{{/autocomplete}} name="{{name}}" class="gform tab-content {{modifiers}}" {{#action}}action="{{action}}"{{/action}} onsubmit="return false;" {{#method}}method="{{method}}"{{/method}}>\n\t<ul class="tabs">\n\t\t{{#fields}}\n        {{#section}}\n\t\t\n            <a href="#tabs{{id}}" data-toggle="tab"><li {{^index}}class="active"{{/index}}>{{{legend}}}</li></a>\n        \n\t    {{/section}}\t\t\n\t\t{{/fields}}\n    </ul></form>\n    {{/sections}}\n  </section>\n  <footer class="modal-card-foot">\n  <div class="footer gform-footer" style="width:100%">{{{footer}}}</div>\n  \n\n  </footer>\n</div>\n</div>',template:'<div><div class="column column-100"><button data-ref="{{array.ref}}" class="gform-append float-right">Add</button><legend>{{label}}</legend><div class="list-group gform-template_row"></div></div></div>',template_item:'<div class="input-template"><div class="gform-template_container">{{{format.template}}}</div></div>',child_modal_footer:'<button class="hidden-print button-outline gform-minus float-left" style="margin:0 15px">X Delete</button><button class="float-right hidden-print done" style="margin:0 15px"><i class="fa fa-check-o"></i>Done</button>',table:'<div class="column column-100"><div style="overflow:scroll" class="column column-100"><button data-ref="{{array.ref}}" class="gform-append float-right">Add</button><h3>{{label}}</h3><table class="sortable"><thead>{{#fields}}<th>{{label}}</th>{{/fields}}</thead><tbody></tbody></table></div></div>'},gform.columns=12,gform.columnClasses=_.map(["","10","20","25","33","40","50","60","66","75","80","90","100"],function(e){return"column-"+e+" column"}),gform.offsetClasses=_.map(["","10","20","25","33","40","50","60","66","75","80","90","100"],function(e){return"column-offset-"+e+" column"}),gform.prototype.opts.suffix="",gform.handleError=function(e){e.valid?(e.satisfied(e.get()),e.el.classList.remove("error"),null!==e.el.querySelector(".error-text")&&(e.el.querySelector(".error-text").innerHTML="")):(null!==e.el.querySelector(".error-text")&&(e.el.querySelector(".error-text").innerHTML=e.errors),e.el.classList.add("error"),e.el.querySelector(".valid").innerHTML="",null!==e.el.querySelector(".valid")&&(e.el.querySelector(".valid").innerHTML=""))},gform.types.cancel=_.defaultsDeep({},gform.types.button,{defaults:{label:'<i class="fa fa-times"></i> Cancel',action:"cancel",modifiers:"button-outline"}}),gform.types.save=_.defaultsDeep({},gform.types.button,{defaults:{label:'<i class="fa fa-check"></i> Save',action:"save",modifiers:"float-right"}}),gform.types.reset=_.defaultsDeep({},gform.types.button,{defaults:{label:'<i class="fa fa-times"></i> Reset',action:"reset",modifiers:"button-outline"}}),gform.types.clear=_.defaultsDeep({},gform.types.button,{defaults:{label:'<i class="fa fa-times"></i> Clear',action:"clear",modifiers:"button-outline"}}),gform.types.fieldset.setLabel=function(){this.label=gform.renderString(this.item.label||this.label,this);var e=this.el.querySelector("legend");null!==e&&(e.innerHTML="<h5>"+this.label+"</h5>")},gform.prototype.modal=function(e){var t=this.modalEl||this.el;switch(document.body.contains(t)||(document.body.appendChild(t),t.querySelector(".close").addEventListener("click",function(){(this.owner||this).trigger("close",this)}.bind(this))),e){case"hide":gform.addClass(t,"modal-hide");break;default:gform.removeClass(t,"modal-hide")}return this};
