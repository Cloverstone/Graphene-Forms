<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/skeleton.css">

  </head>
  <body>
   <div style="width:500px;margin:50px auto" id="form"></div>
   <pre style="width:500px;margin:50px auto" id="result"></pre>
    <script src="./assets/js/lodash.min.js"></script>    
    <script type='text/javascript' src='./src/forman.js'></script>
    <script type='text/javascript' src='./src/forman.validate.js'></script>
    <script type='text/javascript' src='./src/forman.events.js'></script>
    <script type='text/javascript' src='./src/forman.conditions.js'></script>
    <script type='text/javascript' src='./src/forman.skeleton.js'></script>

    <script>
    options ={
        attributes:{'favorite_state':'MT',first_name: ["Bob", "Joe", 'more'],
  "candies": {
    "candy": "asfa",
    "brand": "",
    "flavors": [
      {
        "flavor": "F1",
        "color": ["red", "green"]
      },
      {
        "flavor": "f2",
        "color": ["blue","purple"]
      }
    ]
  } },
        legend:'My Form',
        fields:[
            // {name: 'checked', label: 'Checked?',type: 'checkbox', display: {matches:{name:'job', value:'first'}}},
            // {name: 'last_name', label: 'Last Name', validate: {required:true}},
            // {name: 'job', type:'select', max: 5, default: {label:'ZERO', value: ''}, options:['first', 1,3,{value:'hello',label:'Other'}]},
            // {"label": "Favorite State",type:'select', "options": "./states.json", "label_key":'name'},
            {label: 'Candies', type:'fieldset', fields: [{label: 'Candy'},{label: 'Brand'},{name: 'flavors', label: '', type:'fieldset', array:true, fields: [{label: 'Flavor'},{ label: 'Color'}]}]},
            // {name: 'first_name', array:true},

        ]
    };
    // options = {
    //   attributes: {first_name: 'John', last_name: 'Doe'},//optional
    //   fields: [
    //     {label: 'First Name'}, 
    //     {label: 'Last Name'}
    //   ], actions: false};
    var myForman = new forman(options, '#form')
    myForman.debounce('change', function(field){
        // field.owner.validate();
        document.querySelector('#result').innerHTML = JSON.stringify(myForman.toJSON(), null, 2)
    })
    </script>
   </body>
</html>